<!-- DEBUG: IBM CARBON ADMIN LOGIN TEMPLATE -->
{% extends "core/base.html" %}
{% load static %}

{% block title %}Login - StackSense{% endblock %}

{% block extrahead %}
<!-- IBM Carbon Design System -->
<link rel="stylesheet" href="{% static 'core/css/design-system.css' %}">
<style>
    /* Full-screen login layout */
    body {
        margin: 0 !important;
        padding: 0 !important;
        width: 100vw !important;
        height: 100vh !important;
        background: var(--cds-color-gray-10) !important;
        display: flex !important;
        align-items: flex-start !important;
        justify-content: flex-start !important;
    }

    /* Hide base template elements */
    .ui-shell-header,
    .ui-shell-left-panel,
    .main-content,
    .back-button-container,
    a[href="/monitoring/"] {
        display: none !important;
    }

    /* Login container - left aligned and styled */
    .login-container {
        width: 400px;
        max-width: 90vw;
        background: var(--cds-color-white);
        border: 1px solid var(--cds-color-gray-20);
        border-radius: var(--cds-border-radius-lg);
        padding: var(--cds-spacing-8);
        box-shadow: var(--cds-shadow-lg);
        margin: var(--cds-spacing-8);
    }

    .login-header {
        text-align: left;
        margin-bottom: var(--cds-spacing-8);
    }

    .login-logo {
        margin-bottom: var(--cds-spacing-4);
    }

    .login-title {
        font-size: var(--cds-font-size-3xl);
        font-weight: var(--cds-font-weight-bold);
        color: var(--cds-color-gray-100);
        margin-bottom: var(--cds-spacing-2);
    }

    .login-subtitle {
        font-size: var(--cds-font-size-lg);
        color: var(--cds-color-gray-70);
        margin: 0;
    }

    /* Error messages */
    .error-message {
        background-color: var(--cds-color-red-50);
        border: 1px solid var(--cds-color-red-20);
        border-radius: var(--cds-border-radius-md);
        color: var(--cds-color-red-70);
        padding: var(--cds-spacing-4);
        margin-bottom: var(--cds-spacing-6);
        font-size: var(--cds-font-size-sm);
    }

    /* Forgot password link */
    .forgot-password {
        text-align: center;
        margin-top: var(--cds-spacing-6);
        padding-top: var(--cds-spacing-4);
        border-top: 1px solid var(--cds-color-gray-20);
    }

    .forgot-password a {
        color: var(--cds-color-blue-60);
        text-decoration: none;
        font-size: var(--cds-font-size-sm);
    }

    .forgot-password a:hover {
        color: var(--cds-color-blue-70);
        text-decoration: underline;
    }
</style>
{% endblock %}

{% block content %}
<div class="login-container">
    <!-- Header -->
    <header class="login-header">
        <div class="login-logo">
            <svg width="64" height="48" viewBox="0 0 160 120" xmlns="http://www.w3.org/2000/svg">
                <defs>
                    <linearGradient id="lg1" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#0ea5e9;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#0369a1;stop-opacity:1" />
                    </linearGradient>
                    <linearGradient id="lg2" x1="0%" y1="0%" x2="100%" y2="0%">
                        <stop offset="0%" style="stop-color:#22c55e;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#15803d;stop-opacity:1" />
                    </linearGradient>
                </defs>
                <rect x="20" y="10" width="120" height="26" rx="13" fill="url(#lg1)" opacity="0.95"/>
                <circle cx="35" cy="23" r="5.5" fill="#22c55e"/>
                <rect x="20" y="45" width="120" height="26" rx="13" fill="url(#lg1)" opacity="0.95"/>
                <circle cx="35" cy="58" r="5.5" fill="#f59e0b"/>
                <rect x="20" y="80" width="120" height="26" rx="13" fill="url(#lg2)" opacity="0.95"/>
                <circle cx="35" cy="93" r="5.5" fill="#ef4444"/>
            </svg>
        </div>
        <h1 class="login-title">StackSense</h1>
        <p class="login-subtitle">Welcome to StackSense</p>
    </header>

    <!-- Error Messages -->
    {% if form.errors %}
    <div class="bx--inline-notification bx--inline-notification--error bx--inline-notification--low-contrast" role="alert" style="margin-bottom: var(--cds-spacing-6);">
        <div class="bx--inline-notification__details">
            <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" class="bx--inline-notification__icon" width="20" height="20" viewBox="0 0 20 20" aria-hidden="true">
                <path d="M10,1c-5,0-9,4-9,9s4,9,9,9s9-4,9-9S15,1,10,1z M9,5h2v6H9V5z M9,13h2v2H9V13z"></path>
            </svg>
            <div class="bx--inline-notification__text-wrapper">
                <p class="bx--inline-notification__title">Login Failed</p>
                <p class="bx--inline-notification__subtitle">Please correct the errors below and try again.</p>
            </div>
        </div>
        <button class="bx--inline-notification__close-button" type="button" aria-label="close">
            <svg focusable="false" preserveAspectRatio="xMidYMid meet" style="will-change: transform;" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" aria-hidden="true">
                <path d="M12 4.7l-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"></path>
            </svg>
        </button>
    </div>
    {% endif %}

    <!-- Login Form -->
    <form action="{% url 'admin:login' %}" method="post" id="login-form">
        {% csrf_token %}

        <!-- Username Field -->
        <div class="bx--form-item" style="margin-bottom: var(--cds-spacing-6);">
            <label class="bx--label" for="id_username">Username</label>
            <input type="text" name="username" id="id_username" class="bx--text-input" placeholder="Enter your username" required autofocus>
        </div>

        <!-- Password Field -->
        <div class="bx--form-item" style="margin-bottom: var(--cds-spacing-8);">
            <label class="bx--label" for="id_password">Password</label>
            <input type="password" name="password" id="id_password" class="bx--text-input" placeholder="Enter your password" required>
        </div>

        <!-- Hidden next field -->
        <input type="hidden" name="next" value="{{ next|default:"/monitoring/" }}">

        <!-- Submit Button -->
        <div style="display: flex; gap: var(--cds-spacing-4); justify-content: flex-end;">
            <button type="submit" class="bx--btn bx--btn--primary bx--btn--field">Log in</button>
        </div>
    </form>

    <!-- Forgot Password -->
    <div class="forgot-password">
        <a href="/password-reset/">Forgot password?</a>
    </div>
</div>

<!-- Initialize IBM Carbon components -->
<script>
document.addEventListener('DOMContentLoaded', function() {
    console.log('IBM Carbon Login Page Loaded');
});
</script>
{% endblock %}
